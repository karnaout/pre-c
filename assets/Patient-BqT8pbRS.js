import{E as Ae,j as o,h as le,f as re,s as Q,F as u,k as b,L as j,r,i as se,_ as ne,M as Fe,N as $e,l as _,m as ie,T as ce,O as Ve,w as Y,A as k,x as N,y as je,n as P,P as Be,Q as ke,U,V as We,I as He,W as Ke,B as oe}from"./index-CZCi8_lK.js";import{r as S}from"./createSvgIcon-CnUINSrS.js";import{T as te}from"./TextField-B-qmQ5jv.js";import{I as qe}from"./InputAdornment-CvykBIie.js";import{T as Ge,a as Qe,b as Ye,c as Se,d as f,e as Je}from"./TableRow-BIraJTu1.js";import{C as Xe}from"./Checkbox-CUrsDD44.js";import{D as Ze,a as ea,b as aa}from"./DialogTitle-B3rfv5ig.js";import{C as oa}from"./Container-3yni4-w9.js";import{G as De}from"./Grid-CgNaRYOv.js";import"./SwitchBase-jup12wBb.js";const ta=Ae(o.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function la(e){return re("MuiChip",e)}const d=le("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),ra=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],sa=e=>{const{classes:a,disabled:n,size:l,color:c,iconColor:p,onDelete:g,clickable:s,variant:i}=e,h={root:["root",i,n&&"disabled",`size${u(l)}`,`color${u(c)}`,s&&"clickable",s&&`clickableColor${u(c)}`,g&&"deletable",g&&`deletableColor${u(c)}`,`${i}${u(c)}`],label:["label",`label${u(l)}`],avatar:["avatar",`avatar${u(l)}`,`avatarColor${u(c)}`],icon:["icon",`icon${u(l)}`,`iconColor${u(p)}`],deleteIcon:["deleteIcon",`deleteIcon${u(l)}`,`deleteIconColor${u(c)}`,`deleteIcon${u(i)}Color${u(c)}`]};return ie(h,la,a)},na=Q("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:n}=e,{color:l,iconColor:c,clickable:p,onDelete:g,size:s,variant:i}=n;return[{[`& .${d.avatar}`]:a.avatar},{[`& .${d.avatar}`]:a[`avatar${u(s)}`]},{[`& .${d.avatar}`]:a[`avatarColor${u(l)}`]},{[`& .${d.icon}`]:a.icon},{[`& .${d.icon}`]:a[`icon${u(s)}`]},{[`& .${d.icon}`]:a[`iconColor${u(c)}`]},{[`& .${d.deleteIcon}`]:a.deleteIcon},{[`& .${d.deleteIcon}`]:a[`deleteIcon${u(s)}`]},{[`& .${d.deleteIcon}`]:a[`deleteIconColor${u(l)}`]},{[`& .${d.deleteIcon}`]:a[`deleteIcon${u(i)}Color${u(l)}`]},a.root,a[`size${u(s)}`],a[`color${u(l)}`],p&&a.clickable,p&&l!=="default"&&a[`clickableColor${u(l)})`],g&&a.deletable,g&&l!=="default"&&a[`deletableColor${u(l)}`],a[i],a[`${i}${u(l)}`]]}})(({theme:e,ownerState:a})=>{const n=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return b({maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${d.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${d.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:n,fontSize:e.typography.pxToRem(12)},[`& .${d.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${d.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${d.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${d.icon}`]:b({marginLeft:5,marginRight:-6},a.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},a.iconColor===a.color&&b({color:e.vars?e.vars.palette.Chip.defaultIconColor:n},a.color!=="default"&&{color:"inherit"})),[`& .${d.deleteIcon}`]:b({WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:j(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:j(e.palette.text.primary,.4)}},a.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},a.color!=="default"&&{color:e.vars?`rgba(${e.vars.palette[a.color].contrastTextChannel} / 0.7)`:j(e.palette[a.color].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[a.color].contrastText}})},a.size==="small"&&{height:24},a.color!=="default"&&{backgroundColor:(e.vars||e).palette[a.color].main,color:(e.vars||e).palette[a.color].contrastText},a.onDelete&&{[`&.${d.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:j(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},a.onDelete&&a.color!=="default"&&{[`&.${d.focusVisible}`]:{backgroundColor:(e.vars||e).palette[a.color].dark}})},({theme:e,ownerState:a})=>b({},a.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:j(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${d.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:j(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}},a.clickable&&a.color!=="default"&&{[`&:hover, &.${d.focusVisible}`]:{backgroundColor:(e.vars||e).palette[a.color].dark}}),({theme:e,ownerState:a})=>b({},a.variant==="outlined"&&{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${d.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${d.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${d.avatar}`]:{marginLeft:4},[`& .${d.avatarSmall}`]:{marginLeft:2},[`& .${d.icon}`]:{marginLeft:4},[`& .${d.iconSmall}`]:{marginLeft:2},[`& .${d.deleteIcon}`]:{marginRight:5},[`& .${d.deleteIconSmall}`]:{marginRight:3}},a.variant==="outlined"&&a.color!=="default"&&{color:(e.vars||e).palette[a.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / 0.7)`:j(e.palette[a.color].main,.7)}`,[`&.${d.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:j(e.palette[a.color].main,e.palette.action.hoverOpacity)},[`&.${d.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / ${e.vars.palette.action.focusOpacity})`:j(e.palette[a.color].main,e.palette.action.focusOpacity)},[`& .${d.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / 0.7)`:j(e.palette[a.color].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[a.color].main}}})),ia=Q("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,a)=>{const{ownerState:n}=e,{size:l}=n;return[a.label,a[`label${u(l)}`]]}})(({ownerState:e})=>b({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},e.variant==="outlined"&&{paddingLeft:11,paddingRight:11},e.size==="small"&&{paddingLeft:8,paddingRight:8},e.size==="small"&&e.variant==="outlined"&&{paddingLeft:7,paddingRight:7}));function Re(e){return e.key==="Backspace"||e.key==="Delete"}const ca=r.forwardRef(function(a,n){const l=se({props:a,name:"MuiChip"}),{avatar:c,className:p,clickable:g,color:s="default",component:i,deleteIcon:h,disabled:v=!1,icon:$,label:E,onClick:M,onDelete:C,onKeyDown:m,onKeyUp:T,size:B="medium",variant:W="filled",tabIndex:J,skipFocusWhenDisabled:A=!1}=l,X=ne(l,ra),F=r.useRef(null),w=Fe(F,n),Z=x=>{x.stopPropagation(),C&&C(x)},L=x=>{x.currentTarget===x.target&&Re(x)&&x.preventDefault(),m&&m(x)},ee=x=>{x.currentTarget===x.target&&(C&&Re(x)?C(x):x.key==="Escape"&&F.current&&F.current.blur()),T&&T(x)},z=g!==!1&&M?!0:g,H=z||C?$e:i||"div",D=b({},l,{component:H,disabled:v,size:B,color:s,iconColor:r.isValidElement($)&&$.props.color||s,onDelete:!!C,clickable:z,variant:W}),R=sa(D),ae=H===$e?b({component:i||"div",focusVisibleClassName:R.focusVisible},C&&{disableRipple:!0}):{};let K=null;C&&(K=h&&r.isValidElement(h)?r.cloneElement(h,{className:_(h.props.className,R.deleteIcon),onClick:Z}):o.jsx(ta,{className:_(R.deleteIcon),onClick:Z}));let q=null;c&&r.isValidElement(c)&&(q=r.cloneElement(c,{className:_(R.avatar,c.props.className)}));let G=null;return $&&r.isValidElement($)&&(G=r.cloneElement($,{className:_(R.icon,$.props.className)})),o.jsxs(na,b({as:H,className:_(R.root,p),disabled:z&&v?!0:void 0,onClick:M,onKeyDown:L,onKeyUp:ee,ref:w,tabIndex:A&&v?-1:J,ownerState:D},ae,X,{children:[q||G,o.jsx(ia,{className:_(R.label),ownerState:D,children:E}),K]}))});function da(e){return re("MuiDialogActions",e)}le("MuiDialogActions",["root","spacing"]);const pa=["className","disableSpacing"],ua=e=>{const{classes:a,disableSpacing:n}=e;return ie({root:["root",!n&&"spacing"]},da,a)},ga=Q("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:n}=e;return[a.root,!n.disableSpacing&&a.spacing]}})(({ownerState:e})=>b({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),fa=r.forwardRef(function(a,n){const l=se({props:a,name:"MuiDialogActions"}),{className:c,disableSpacing:p=!1}=l,g=ne(l,pa),s=b({},l,{disableSpacing:p}),i=ua(s);return o.jsx(ga,b({className:_(i.root,c),ownerState:s,ref:n},g))});function va(e){return re("MuiDialogContentText",e)}le("MuiDialogContentText",["root"]);const xa=["children","className"],ha=e=>{const{classes:a}=e,l=ie({root:["root"]},va,a);return b({},a,l)},ba=Q(ce,{shouldForwardProp:e=>Ve(e)||e==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,a)=>a.root})({}),Ca=r.forwardRef(function(a,n){const l=se({props:a,name:"MuiDialogContentText"}),{className:c}=l,p=ne(l,xa),g=ha(p);return o.jsx(ba,b({component:"p",variant:"body1",color:"text.secondary",ref:n,ownerState:p,className:_(g.root,c)},l,{classes:g}))}),ma=()=>{const[e,a]=r.useState([]),[n,l]=r.useState(!0),[c,p]=r.useState(null),g=r.useCallback(async()=>{l(!0),p(null);try{const s=await Y.get("https://precrohn-api-production.up.railway.app/api/users",{headers:{Authorization:`${localStorage.getItem("token")}`}});a(s.data)}catch(s){p(s.response?s.response.data:s.message)}finally{l(!1)}},[]);return r.useEffect(()=>{g()},[g]),{users:e,loading:n,error:c,refetch:g}},ya=()=>{const[e,a]=r.useState(null),[n,l]=r.useState(!1),[c,p]=r.useState(null);return{triggerNextStep:async s=>{l(!0),p(null),console.log("next id",s);try{const i=await Y.get(`https://precrohn-api-production.up.railway.app/api/next-step?id=${s}`,{headers:{Authorization:`${localStorage.getItem("token")}`}});console.log("response",i.data),a(i.data)}catch(i){p(i.response?i.response.data:i.message)}finally{l(!1)}},nextStepData:e,loading:n,error:c}},$a=()=>{const[e,a]=r.useState(null),[n,l]=r.useState(!1),[c,p]=r.useState(null);return{triggerRestart:async s=>{l(!0),p(null);try{const i=await Y.get(`https://precrohn-api-production.up.railway.app/api/restart?id=${s}`,{headers:{Authorization:`${localStorage.getItem("token")}`}});console.log(i.data),a(i.data)}catch(i){p(i.response?i.response.data:i.message)}finally{l(!1)}},restartData:e,loading:n,error:c}},ja=()=>{const[e,a]=r.useState(null),[n,l]=r.useState(!1),[c,p]=r.useState(null);return{triggerDeleteUser:async s=>{var i,h;l(!0),p(null),console.log(s);try{const v=await Y.get(`https://precrohn-api-production.up.railway.app/api/users/delete?id=${s}`,{headers:{Authorization:`${localStorage.getItem("token")}`}});console.log("response",(h=(i=v==null?void 0:v.data)==null?void 0:i.response)==null?void 0:h.status),a("response delet",v)}catch(v){console.log("response err zabi",v),p(v.response?v.response.data:v.message)}finally{l(!1)}},deleteData:e,loading:n,error:c}};var de={},ka=k;Object.defineProperty(de,"__esModule",{value:!0});var Ie=de.default=void 0,Sa=ka(S()),Da=o;Ie=de.default=(0,Sa.default)((0,Da.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert");var pe={},Ra=k;Object.defineProperty(pe,"__esModule",{value:!0});var _e=pe.default=void 0,Ia=Ra(S()),_a=o;_e=pe.default=(0,Ia.default)((0,_a.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email");var ue={},Ma=k;Object.defineProperty(ue,"__esModule",{value:!0});var Me=ue.default=void 0,za=Ma(S()),Pa=o;Me=ue.default=(0,za.default)((0,Pa.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l4 4 4-4H6c0-3.86 3.14-7 7-7s7 3.14 7 7-3.14 7-7 7c-1.9 0-3.62-.76-4.88-1.99L6.7 18.42C8.32 20.01 10.55 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m2 8v-1c0-1.1-.9-2-2-2s-2 .9-2 2v1c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-3c0-.55-.45-1-1-1m-1 0h-2v-1c0-.55.45-1 1-1s1 .45 1 1z"}),"LockReset");var ge={},Ea=k;Object.defineProperty(ge,"__esModule",{value:!0});var ze=ge.default=void 0,Ta=Ea(S()),wa=o;ze=ge.default=(0,Ta.default)((0,wa.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");var fe={},La=k;Object.defineProperty(fe,"__esModule",{value:!0});var Pe=fe.default=void 0,Oa=La(S()),Ua=o;Pe=fe.default=(0,Oa.default)((0,Ua.jsx)("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward");var ve={},Na=k;Object.defineProperty(ve,"__esModule",{value:!0});var Ee=ve.default=void 0,Aa=Na(S()),Fa=o;Ee=ve.default=(0,Aa.default)((0,Fa.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh");var xe={},Va=k;Object.defineProperty(xe,"__esModule",{value:!0});var Te=xe.default=void 0,Ba=Va(S()),Wa=o;Te=xe.default=(0,Ba.default)((0,Wa.jsx)("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"}),"FilterList");var he={},Ha=k;Object.defineProperty(he,"__esModule",{value:!0});var we=he.default=void 0,Ka=Ha(S()),qa=o;we=he.default=(0,Ka.default)((0,qa.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search");var be={},Ga=k;Object.defineProperty(be,"__esModule",{value:!0});var Le=be.default=void 0,Qa=Ga(S()),Ya=o;Le=be.default=(0,Qa.default)((0,Ya.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z"}),"KeyboardArrowDown");var Ce={},Ja=k;Object.defineProperty(Ce,"__esModule",{value:!0});var Oe=Ce.default=void 0,Xa=Ja(S()),Za=o;Oe=Ce.default=(0,Xa.default)((0,Za.jsx)("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"}),"KeyboardArrowUp");const eo=[{value:"1",label:"Admin"},{value:"2",label:"Intervention"},{value:"3",label:"Control"}],ao=({onSendEmail:e,onResetPassword:a,onDeleteUser:n,RefreshTable:l})=>{const{users:c,loading:p,error:g,refetch:s}=ma(),[i,h]=r.useState([]),[v,$]=r.useState([]),[E,M]=r.useState(null),[C,m]=r.useState(null),[T,B]=r.useState(null),[W,J]=r.useState(""),[A,X]=r.useState(!0),{triggerNextStep:F,nextStepData:w,loading:Z,error:L}=ya(),{triggerRestart:ee,restartData:z,loading:H,error:D}=$a();r.useEffect(()=>{c&&h(c)},[c]),r.useEffect(()=>{var t;w&&w.Result!==null&&(N.success(((t=w.Result)==null?void 0:t.message)||"Next phase completed successfully!"),s())},[w,s]),r.useEffect(()=>{L&&N.error(`Error ${L.message||L}`)},[L]),r.useEffect(()=>{z&&(N.success(z.message||"User state restarted successfully!"),s())},[z,D,s]),r.useEffect(()=>{D&&N.error(`Error restarting user: ${D.message||D}`)},[D]),r.useEffect(()=>{s()},[l]);const R=()=>{X(!A),h(t=>[...t].sort((y,I)=>{const me=new Date(y.date||0),ye=new Date(I.date||0);return A?ye-me:me-ye}))},ae=i.filter(t=>{const y=v.length===0||v.includes(t.role),I=`${t.firstName} ${t.secondName}`.toLowerCase().includes(W.toLowerCase());return y&&I}),K=t=>{const y=v.indexOf(t),I=[...v];y===-1?I.push(t):I.splice(y,1),$(I)},q=t=>{M(t.currentTarget)},G=()=>{M(null)},x=t=>{F(t)},Ue=t=>{ee(t)},Ne=(t,y)=>{B(y),m(t.currentTarget)},O=()=>{B(null),m(null)},V="primary";return p?o.jsx(je,{}):g?o.jsx("div",{children:"Error: Network error occurred"}):o.jsxs(o.Fragment,{children:[o.jsx(P,{mb:2,children:o.jsx(te,{variant:"outlined",size:"small",placeholder:"Search",value:W,onChange:t=>J(t.target.value),InputProps:{startAdornment:o.jsx(qe,{position:"start",children:o.jsx(we,{})})}})}),o.jsx(Ge,{component:Be,style:{backgroundColor:"white",borderRadius:"14px",maxHeight:"90%",overflowY:"auto"},children:o.jsxs(Qe,{stickyHeader:!0,children:[o.jsx(Ye,{children:o.jsxs(Se,{sx:{backgroundColor:"#1976d3"},children:[o.jsx(f,{sx:{color:"white",backgroundColor:"#1976d3"},children:"First Name"}),o.jsx(f,{sx:{color:"white",backgroundColor:"#1976d3"},children:"Last Name"}),o.jsx(f,{sx:{color:"white",backgroundColor:"#1976d3"},children:"Email"}),o.jsx(f,{sx:{color:"white",backgroundColor:"#1976d3"},align:"center",children:"Progress"}),o.jsxs(f,{sx:{color:"white",backgroundColor:"#1976d3"},align:"center",children:[o.jsxs(P,{display:"flex",alignItems:"center",onClick:q,style:{cursor:"pointer",display:"flex",justifyContent:"space-between"},children:["Role",o.jsx(Te,{fontSize:"small"})]}),o.jsx(ke,{anchorEl:E,open:!!E,onClose:G,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:eo.map(t=>o.jsxs(U,{value:t.value,onClick:()=>K(t.value),children:[o.jsx(Xe,{checked:v.includes(t.value)}),o.jsx(We,{primary:t.label})]},t.value))})]}),o.jsx(f,{sx:{color:"white",backgroundColor:"#1976d3"},align:"center",children:"Phase"}),o.jsx(f,{sx:{color:"white",backgroundColor:"#1976d3"},align:"center",children:o.jsxs(P,{display:"flex",alignItems:"center",onClick:R,style:{cursor:"pointer",display:"flex",justifyContent:"space-between"},children:["Submit Date",A?o.jsx(Le,{fontSize:"small"}):o.jsx(Oe,{fontSize:"small"})]})}),o.jsx(f,{sx:{color:"white",backgroundColor:"#1976d3"},align:"center",children:"Due Date"}),o.jsx(f,{sx:{color:"white",backgroundColor:"#1976d3"},align:"center",children:"Biomarkers"}),o.jsx(f,{sx:{color:"white",backgroundColor:"#1976d3"},align:"center",children:"State"}),o.jsx(f,{sx:{color:"white",backgroundColor:"#1976d3"},align:"center",children:"Actions"})]})}),o.jsx(Je,{children:ae.map(t=>{var y;return o.jsxs(Se,{children:[o.jsx(f,{children:t==null?void 0:t.firstName}),o.jsx(f,{children:t==null?void 0:t.secondName}),o.jsx(f,{children:t==null?void 0:t.email}),o.jsx(f,{align:"center",children:o.jsxs(P,{position:"relative",display:"inline-flex",children:[o.jsx(je,{variant:"determinate",value:t.forms}),o.jsx(P,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:o.jsx(ce,{variant:"caption",component:"div",color:"textSecondary",sx:{paddingTop:"3px"},children:`${t.forms.toString()}%`})})]})}),o.jsx(f,{children:t.role==="1"?"Admin":t.role==="2"?"Intervention":t.role==="3"?"Control":"Unknown"}),o.jsx(f,{align:"center",children:t.phase===0?"Baseline":t.phase===1?"Phase One":t.phase===2?"Phase Two":t.phase===3?"Phase Three":""}),o.jsx(f,{children:t==null?void 0:t.date}),o.jsx(f,{children:t==null?void 0:t.due_date}),o.jsx(f,{children:((y=t==null?void 0:t.userObject)==null?void 0:y.biomarkers)==="yes"?"Yes":"No"}),o.jsx(f,{children:o.jsx(ca,{label:t==null?void 0:t.stateStr,color:(t==null?void 0:t.stateStr)==="Closed"?"error":"success",variant:"outlined",sx:{fontWeight:700,minWidth:"70px",minHeight:"20px",display:"flex",fontSize:"14px"}})}),o.jsxs(f,{align:"center",children:[o.jsx(He,{onClick:I=>Ne(I,t),title:"More Actions",children:o.jsx(Ie,{})}),o.jsxs(ke,{anchorEl:C,open:!!(C&&(T==null?void 0:T.id)===t.id),onClose:O,children:[o.jsxs(U,{onClick:()=>{e(t),O()},children:[o.jsx(_e,{sx:{mr:1,color:V},color:"primary"})," Send Email"]}),o.jsxs(U,{onClick:()=>{a(t),O()},children:[o.jsx(Me,{sx:{mr:1,color:V},color:"secondary"})," Reset Password"]}),o.jsxs(U,{onClick:()=>{x(t.id),O()},children:[o.jsx(Pe,{sx:{mr:1,color:V},color:"warning"})," Next Phase"]}),o.jsxs(U,{onClick:()=>{Ue(t.id),O()},children:[o.jsx(Ee,{sx:{mr:1,color:V},color:"error"})," Reset Progress"]}),o.jsxs(U,{onClick:()=>{n(t),O()},children:[o.jsx(ze,{sx:{mr:1,color:V},color:"error"})," Delete User"]})]})]})]},t==null?void 0:t.id)})})]})})]})},oo=({user:e,open:a,onClose:n})=>{const l=()=>{n()};return o.jsx(Ke,{open:a,onClose:n,children:o.jsxs(P,{sx:{padding:4,backgroundColor:"white",margin:"auto",marginTop:"20vh",maxWidth:400},children:[o.jsxs(ce,{variant:"h6",gutterBottom:!0,children:["Send Email to ",e==null?void 0:e.firstName]}),o.jsx(te,{fullWidth:!0,label:"Subject",margin:"normal"}),o.jsx(te,{fullWidth:!0,label:"Message",margin:"normal",multiline:!0,rows:4}),o.jsx(oe,{variant:"contained",color:"primary",onClick:l,children:"Send"})]})})},to=({open:e,user:a,onClose:n,ToastSucc:l,ToastErr:c})=>{const{triggerDeleteUser:p,deleteData:g,loading:s,error:i}=ja(),h=async()=>{await p(a==null?void 0:a.id)};return r.useEffect(()=>{s||(console.log("error",i),console.log("deleteData",g),g!==null&&i===null?(console.log("zabi 1"),l("User deleted successfully"),n()):(i!==null&&(console.log("zabi 2"),c("Error deleting user")),n()))},[s]),o.jsxs(Ze,{open:e,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[o.jsx(ea,{id:"alert-dialog-title",children:"Delete User"}),o.jsx(aa,{children:o.jsxs(Ca,{id:"alert-dialog-description",children:['Are you sure you want to delete the user "',a==null?void 0:a.firstName," ",a==null?void 0:a.secondName,'"? This action cannot be undone.']})}),o.jsxs(fa,{children:[o.jsx(oe,{onClick:n,color:"primary",children:"Cancel"}),o.jsx(oe,{onClick:h,color:"error",disabled:s,autoFocus:!0,children:s?"Deleting...":"Delete"})]})]})},vo=()=>{const[e,a]=r.useState(null),[n,l]=r.useState(!1),[c,p]=r.useState(!1),[g,s]=r.useState(!1),[i,h]=r.useState(!0),v=m=>{a(m),l(!0)},$=m=>{a(m),s(!0)},E=m=>{a(m),p(!0)},M=m=>{N.success("User deleted successfully"),h(!i)},C=m=>{N.error("Failed to delete user.")};return o.jsxs(oa,{maxWidth:"90%",children:[o.jsx(De,{container:!0,spacing:2,direction:"column",children:o.jsx(De,{item:!0,xs:12,children:o.jsx(P,{children:o.jsx(ao,{onSendEmail:v,onResetPassword:$,onDeleteUser:E,RefreshTable:i})})})}),o.jsx(oo,{user:e,open:n,onClose:()=>l(!1)}),o.jsx(to,{open:c,user:e,onClose:()=>{p(!1)},ToastSucc:M,ToastErr:C})]})};export{vo as default};
//# sourceMappingURL=Patient-BqT8pbRS.js.map
