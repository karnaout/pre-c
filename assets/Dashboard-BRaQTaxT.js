import{r as a,w as A,x as B,j as e,T as S,n as T,B as L,y as k}from"./index-CZCi8_lK.js";import{C as q}from"./Container-3yni4-w9.js";import{T as s,F}from"./TextField-B-qmQ5jv.js";import{R as N,a as u}from"./RadioGroup-D8zOY0RZ.js";import{F as m}from"./FormControlLabel-Dw-DhQkK.js";import{A as D}from"./Alert-CJmfXbd5.js";import{G as P}from"./Grid-CgNaRYOv.js";import"./SwitchBase-jup12wBb.js";const G=()=>{const[d,o]=a.useState(!1),[c,n]=a.useState(null),[x,g]=a.useState(null);return{register:async(p,l,h,j,v,f,b)=>{var i,w;o(!0),n(null);let C=j.toLowerCase().trim();try{const r=await A.post("https://precrohn-api-production.up.railway.app/api/auth/register",{firstName:p,secondName:l,username:h,email:C,password:v,role:f,biomarkers:b},{headers:{"Content-Type":"application/json"},maxBodyLength:1/0});console.log(),g(r.data)}catch(r){console.log((w=(i=r==null?void 0:r.response)==null?void 0:i.data)==null?void 0:w.message),n(r.response&&r.response.data.message||r.message)}finally{o(!1)}},loading:d,error:c,data:x}},U=()=>{const[d,o]=a.useState(""),[c,n]=a.useState(""),[x,g]=a.useState(""),[y,p]=a.useState(""),[l,h]=a.useState(""),[j,v]=a.useState(""),[f,b]=a.useState("3"),[C,i]=a.useState("no"),{register:w,loading:r,error:R,data:W}=G(),E=t=>{if(t.preventDefault(),l!==j){B.error("Passwords do not match");return}w(d,c,x,y,l,f,C)};return a.useEffect(()=>{W&&(B.success("Registration successful"),o(""),n(""),g(""),p(""),h(""),v(""),b("3"),i("no"))},[W]),e.jsxs(q,{component:"main",maxWidth:"xs",sx:{p:3,my:5,background:"white",borderRadius:"24px",padding:"34px",marginTop:"0px"},children:[e.jsx(S,{variant:"h5",align:"center",gutterBottom:!0,children:"Add New User"}),e.jsxs(T,{component:"form",onSubmit:E,sx:{mt:2},children:[e.jsx(s,{label:"First Name",variant:"outlined",fullWidth:!0,margin:"normal",value:d,onChange:t=>o(t.target.value),required:!0}),e.jsx(s,{label:"Last Name",variant:"outlined",fullWidth:!0,margin:"normal",value:c,onChange:t=>n(t.target.value),required:!0}),e.jsx(s,{label:"Username",variant:"outlined",fullWidth:!0,margin:"normal",value:x,onChange:t=>g(t.target.value),required:!0}),e.jsx(s,{label:"Email Address",variant:"outlined",fullWidth:!0,margin:"normal",value:y,onChange:t=>p(t.target.value),required:!0}),e.jsx(s,{label:"Password",type:"password",variant:"outlined",fullWidth:!0,margin:"normal",value:l,onChange:t=>h(t.target.value),required:!0}),e.jsx(s,{label:"Confirm Password",type:"password",variant:"outlined",fullWidth:!0,margin:"normal",value:j,onChange:t=>v(t.target.value),required:!0}),e.jsxs(F,{component:"fieldset",sx:{mt:2},children:[e.jsx(S,{variant:"subtitle1",gutterBottom:!0,children:"Role"}),e.jsxs(N,{value:f,onChange:t=>b(t.target.value),row:!0,children:[e.jsx(m,{value:"1",control:e.jsx(u,{}),label:"Admin"}),e.jsx(m,{value:"2",control:e.jsx(u,{}),label:"Intervention"}),e.jsx(m,{value:"3",control:e.jsx(u,{}),label:"Control"})]})]}),e.jsxs(F,{component:"fieldset",sx:{mt:2},children:[e.jsx(S,{variant:"subtitle1",gutterBottom:!0,children:"â‰¥ 2+ biomarkers?"}),e.jsxs(N,{value:C,onChange:t=>i(t.target.value),row:!0,children:[e.jsx(m,{value:"yes",control:e.jsx(u,{}),label:"Yes"}),e.jsx(m,{value:"no",control:e.jsx(u,{}),label:"No"})]})]}),e.jsx(L,{variant:"contained",color:"primary",type:"submit",fullWidth:!0,sx:{mt:3,mb:2},disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(k,{size:24,sx:{mr:1}}),"Registering..."]}):"Register"})]}),R&&e.jsx(D,{severity:"error",sx:{mt:2},children:R})]})},Q=()=>e.jsx(q,{maxWidth:"lg",children:e.jsx(P,{container:!0,spacing:2,children:e.jsx(P,{item:!0,xs:12,md:6,children:e.jsx(T,{children:e.jsx(U,{})})})})});export{Q as default};
