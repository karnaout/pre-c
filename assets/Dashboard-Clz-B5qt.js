import{r as s,v as A,w as B,j as e,T as S,B as T,o as L,x as k}from"./index-DQ6dPsCc.js";import{C as q}from"./Container-E4VSzprl.js";import{T as a,F}from"./TextField-CSm90r8d.js";import{R as N,a as n}from"./RadioGroup-ovdB22VD.js";import{F as l}from"./FormControlLabel-DLpYiiV4.js";import{A as D}from"./Alert-C7aH98va.js";import{G as P}from"./Grid-4lP4I6Kg.js";import"./SwitchBase-D9Gsecah.js";const G=()=>{const[i,u]=s.useState(!1),[m,d]=s.useState(null),[c,v]=s.useState(null);return{register:async(b,o,C,x,w,g,y)=>{var p,j;u(!0),d(null);let h=x.toLowerCase().trim();try{const r=await A.post("http://localhost:7000/api/auth/register",{firstName:b,secondName:o,username:C,email:h,password:w,role:g,biomarkers:y},{headers:{"Content-Type":"application/json"},maxBodyLength:1/0});console.log(),v(r.data)}catch(r){console.log((j=(p=r==null?void 0:r.response)==null?void 0:p.data)==null?void 0:j.message),d(r.response&&r.response.data.message||r.message)}finally{u(!1)}},loading:i,error:m,data:c}},U=()=>{const[i,u]=s.useState(""),[m,d]=s.useState(""),[c,v]=s.useState(""),[f,b]=s.useState(""),[o,C]=s.useState(""),[x,w]=s.useState(""),[g,y]=s.useState("3"),[h,p]=s.useState("no"),{register:j,loading:r,error:R,data:W}=G(),E=t=>{if(t.preventDefault(),o!==x){B.error("Passwords do not match");return}j(i,m,c,f,o,g,h)};return s.useEffect(()=>{W&&B.success("Registration successful")},[W]),e.jsxs(q,{component:"main",maxWidth:"xs",sx:{p:3,my:5,background:"white",borderRadius:"24px",padding:"34px",marginTop:"0px"},children:[e.jsx(S,{variant:"h5",align:"center",gutterBottom:!0,children:"Add New User"}),e.jsxs(T,{component:"form",onSubmit:E,sx:{mt:2},children:[e.jsx(a,{label:"First Name",variant:"outlined",fullWidth:!0,margin:"normal",value:i,onChange:t=>u(t.target.value),required:!0}),e.jsx(a,{label:"Last Name",variant:"outlined",fullWidth:!0,margin:"normal",value:m,onChange:t=>d(t.target.value),required:!0}),e.jsx(a,{label:"Username",variant:"outlined",fullWidth:!0,margin:"normal",value:c,onChange:t=>v(t.target.value),required:!0}),e.jsx(a,{label:"Email Address",variant:"outlined",fullWidth:!0,margin:"normal",value:f,onChange:t=>b(t.target.value),required:!0}),e.jsx(a,{label:"Password",type:"password",variant:"outlined",fullWidth:!0,margin:"normal",value:o,onChange:t=>C(t.target.value),required:!0}),e.jsx(a,{label:"Confirm Password",type:"password",variant:"outlined",fullWidth:!0,margin:"normal",value:x,onChange:t=>w(t.target.value),required:!0}),e.jsxs(F,{component:"fieldset",sx:{mt:2},children:[e.jsx(S,{variant:"subtitle1",gutterBottom:!0,children:"Role"}),e.jsxs(N,{value:g,onChange:t=>y(t.target.value),row:!0,children:[e.jsx(l,{value:"1",control:e.jsx(n,{}),label:"Admin"}),e.jsx(l,{value:"2",control:e.jsx(n,{}),label:"Intervention"}),e.jsx(l,{value:"3",control:e.jsx(n,{}),label:"Control"})]})]}),e.jsxs(F,{component:"fieldset",sx:{mt:2},children:[e.jsx(S,{variant:"subtitle1",gutterBottom:!0,children:"â‰¥ 2+ biomarkers?"}),e.jsxs(N,{value:h,onChange:t=>p(t.target.value),row:!0,children:[e.jsx(l,{value:"yes",control:e.jsx(n,{}),label:"Yes"}),e.jsx(l,{value:"no",control:e.jsx(n,{}),label:"No"})]})]}),e.jsx(L,{variant:"contained",color:"primary",type:"submit",fullWidth:!0,sx:{mt:3,mb:2},disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(k,{size:24,sx:{mr:1}}),"Registering..."]}):"Register"})]}),R&&e.jsx(D,{severity:"error",sx:{mt:2},children:R})]})},Q=()=>e.jsx(q,{maxWidth:"lg",children:e.jsx(P,{container:!0,spacing:2,children:e.jsx(P,{item:!0,xs:12,md:6,children:e.jsx(T,{children:e.jsx(U,{})})})})});export{Q as default};
